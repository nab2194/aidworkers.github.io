<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>map_development.utf8</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="exploratory_analyses.html">Global Trends</a>
</li>
<li>
  <a href="https://natalieaboychuk.shinyapps.io/map_dashboard/">Map</a>
</li>
<li>
  <a href="https://natalieaboychuk.shinyapps.io/final_dashboard/">Dashboard: Attacks</a>
</li>
<li>
  <a href="Afghanistan.html">Zoom In: Afghanistan</a>
</li>
<li>
  <a href="conclusions.html">Conclusions</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="final_report.html">Project Report</a>
</li>
<li>
  <a href="https://www.youtube.com/watch?v=nB5XsnSr3B4&amp;feature=youtu.be">
    <span class="fa fa-play-circle fa-sm"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/nab2194/aidworkers.github.io">
    <span class="fa fa-github fa-sm"></span>
     
  </a>
</li>
<li>
  <a href="https://www.who.int/news/item/19-08-2020-world-humanitarian-day-2020-a-tribute-to-aid-workers-on-the-front-lines">
    <span class="fa fa-ambulance fa-sm"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>




</div>


<div id="map-development" class="section level1">
<h1>Map Development</h1>
<p>This document contains the code used to work through creating maps of the data.</p>
<pre class="r"><code>library(tidyverse)
library(dplyr)
library(patchwork)
library(leaflet)
library(lubridate)
library(rvest)
library(httr)
library(flexdashboard)
library(plotly)
library(viridis)
library(stringr)
library(maps)
library(corrplot)
library(rworldmap)

knitr::opts_chunk$set(
  fig.width = 6,
  fig.asp = .6,
  out.width = &quot;90%&quot;
)
theme_set(theme_minimal() + theme(legend.position = &quot;bottom&quot;))
options(
  ggplot2.continuous.colour = &quot;viridis&quot;,
  ggplot2.continuous.fill = &quot;viridis&quot;
)
scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d</code></pre>
<div id="data-import-and-tidying" class="section level2">
<h2>Data import and tidying</h2>
<pre class="r"><code>url = &quot;https://aidworkersecurity.org/incidents/search&quot;
aidworker_html = read_html(url)

aidworker_df = 
  aidworker_html %&gt;% 
  html_nodes(css = &quot;table&quot;) %&gt;%  
  first() %&gt;% 
  html_table() %&gt;% 
  as_tibble()

aidworker_df =
  aidworker_df %&gt;%
  janitor::clean_names() %&gt;% 
  select(-source, -verified) %&gt;% 
  rename(year = year_sort_descending) %&gt;% 
  mutate(intl_org_affected = 
           case_when(
             un != 0 ~ &quot;yes&quot;,
             ingo != 0 ~ &quot;yes&quot;,
             icrc != 0 ~ &quot;yes&quot;,
             ifrc != 0 ~ &quot;yes&quot;,
             other != 0 ~ &quot;yes&quot;,
             lngo_and_nrcs != 0 ~ &quot;no&quot;),
         intl_org_affected = as.factor(intl_org_affected)) %&gt;% 
  mutate(
    latitude = as.numeric(latitude),
    longitude = as.numeric(longitude)
    ) %&gt;% 
  relocate(id, month, day, year, country, intl_org_affected)</code></pre>
<pre><code>## Warning: Problem with `mutate()` input `latitude`.
## ℹ NAs introduced by coercion
## ℹ Input `latitude` is `as.numeric(latitude)`.

## Warning in mask$eval_all_mutate(dots[[i]]): NAs introduced by coercion

## Warning: Problem with `mutate()` input `longitude`.
## ℹ NAs introduced by coercion
## ℹ Input `longitude` is `as.numeric(longitude)`.

## Warning in mask$eval_all_mutate(dots[[i]]): NAs introduced by coercion</code></pre>
<pre class="r"><code>empty_as_na &lt;- function(x){
    if(&quot;factor&quot; %in% class(x)) x &lt;- as.character(x) 
    ifelse(as.character(x) != &quot;&quot;, x, NA)
}

aidworker_df = 
aidworker_df %&gt;% mutate_each(funs(empty_as_na)) </code></pre>
<pre class="r"><code>global_map_df = 
  aidworker_df %&gt;% 
  mutate(
    kidnapping = case_when(means_of_attack %in% c(&quot;Kidnapping&quot;, &quot;Kidnap-killing&quot;) ~ 1),
    shooting = case_when(means_of_attack %in% c(&quot;Shooting&quot;) ~ 1),
    assault = case_when(means_of_attack %in% c(&quot;Bodily assault&quot;, &quot;Rape/sexual assault&quot;) ~ 1),
    explosive = case_when(means_of_attack %in% c(&quot;Aerial bombardment&quot;, &quot;Landmine&quot;, &quot;Other Explosives&quot;, &quot;Roadside IED&quot;,
                                                 &quot;Shelling&quot;, &quot;Vehicle-born IED&quot;) ~ 1)) %&gt;% 
  drop_na(year) %&gt;% 
  group_by(country, year) %&gt;% 
  summarize(
            number_incidents = n(),
            tot_national = sum(total_national_staff),
            tot_intl = sum(total_international_staff),
            tot_victims = sum(total_victims),
            tot_kidnappings = sum(kidnapping, na.rm = TRUE),
            tot_shootings = sum(shooting, na.rm = TRUE),
            tot_assault = sum(assault, na.rm = TRUE),
            tot_explosive = sum(explosive, na.rm = TRUE)) %&gt;% 
  drop_na(country)</code></pre>
<pre><code>## `summarise()` regrouping output by &#39;country&#39; (override with `.groups` argument)</code></pre>
<p>Hey team - so I found a pacakge called <code>rworldmap</code>. You can access useful information about how to use the package by calling <code>vignette("rworldmap")</code>.</p>
<pre class="r"><code>global_map_df %&gt;% 
joinCountryData2Map(
  joinCode = &quot;NAME&quot;,
  nameJoinColumn = &quot;country&quot;,
  verbose = TRUE
  )</code></pre>
<pre><code>## 472 codes from your data successfully matched countries in the map
## 53 codes from your data failed to match with a country code in the map
##       failedCodes failedCountries                   
##  [1,] NA          &quot;Chechnya&quot;                        
##  [2,] NA          &quot;Chechnya&quot;                        
##  [3,] NA          &quot;Chechnya&quot;                        
##  [4,] NA          &quot;Chechnya&quot;                        
##  [5,] NA          &quot;Chechnya&quot;                        
##  [6,] NA          &quot;Chechnya&quot;                        
##  [7,] NA          &quot;Chechnya&quot;                        
##  [8,] NA          &quot;Chechnya&quot;                        
##  [9,] NA          &quot;Chechnya&quot;                        
## [10,] NA          &quot;DR Congo&quot;                        
## [11,] NA          &quot;DR Congo&quot;                        
## [12,] NA          &quot;DR Congo&quot;                        
## [13,] NA          &quot;DR Congo&quot;                        
## [14,] NA          &quot;DR Congo&quot;                        
## [15,] NA          &quot;DR Congo&quot;                        
## [16,] NA          &quot;DR Congo&quot;                        
## [17,] NA          &quot;DR Congo&quot;                        
## [18,] NA          &quot;DR Congo&quot;                        
## [19,] NA          &quot;DR Congo&quot;                        
## [20,] NA          &quot;DR Congo&quot;                        
## [21,] NA          &quot;DR Congo&quot;                        
## [22,] NA          &quot;DR Congo&quot;                        
## [23,] NA          &quot;DR Congo&quot;                        
## [24,] NA          &quot;DR Congo&quot;                        
## [25,] NA          &quot;DR Congo&quot;                        
## [26,] NA          &quot;DR Congo&quot;                        
## [27,] NA          &quot;DR Congo&quot;                        
## [28,] NA          &quot;DR Congo&quot;                        
## [29,] NA          &quot;DR Congo&quot;                        
## [30,] NA          &quot;DR Congo&quot;                        
## [31,] NA          &quot;DR Congo&quot;                        
## [32,] NA          &quot;Kashmir&quot;                         
## [33,] NA          &quot;Libyan Arab Jamahiriya&quot;          
## [34,] NA          &quot;Libyan Arab Jamahiriya&quot;          
## [35,] NA          &quot;Libyan Arab Jamahiriya&quot;          
## [36,] NA          &quot;Libyan Arab Jamahiriya&quot;          
## [37,] NA          &quot;Libyan Arab Jamahiriya&quot;          
## [38,] NA          &quot;Libyan Arab Jamahiriya&quot;          
## [39,] NA          &quot;Libyan Arab Jamahiriya&quot;          
## [40,] NA          &quot;Libyan Arab Jamahiriya&quot;          
## [41,] NA          &quot;Libyan Arab Jamahiriya&quot;          
## [42,] NA          &quot;Occupied Palestinian Territories&quot;
## [43,] NA          &quot;Occupied Palestinian Territories&quot;
## [44,] NA          &quot;Occupied Palestinian Territories&quot;
## [45,] NA          &quot;Occupied Palestinian Territories&quot;
## [46,] NA          &quot;Occupied Palestinian Territories&quot;
## [47,] NA          &quot;Occupied Palestinian Territories&quot;
## [48,] NA          &quot;Occupied Palestinian Territories&quot;
## [49,] NA          &quot;Occupied Palestinian Territories&quot;
## [50,] NA          &quot;Occupied Palestinian Territories&quot;
## [51,] NA          &quot;Occupied Palestinian Territories&quot;
## [52,] NA          &quot;Occupied Palestinian Territories&quot;
## [53,] NA          &quot;Occupied Palestinian Territories&quot;
## 167 codes from the map weren&#39;t represented in your data</code></pre>
<p>So, Chechnya, DR Congo, Kashmir, Libyan Arab Jamahiriya, Occupied Palestinian Territories are in our df, but not in the map. As per the reasons outlined in part_1.RMD, I think we should drop Kashmir (only 1 incident) and recode Chechnya as Russia (we have no other data in Russia), and make a note. We could try recoding the other countries with other names for them and see if they end up matching up.</p>
<pre class="r"><code>joined_map = 
  global_map_df %&gt;%
  filter(year == &quot;2019&quot;) %&gt;% 
joinCountryData2Map(
  joinCode = &quot;NAME&quot;,
  nameJoinColumn = &quot;country&quot;,
  verbose = TRUE
  )</code></pre>
<pre><code>## 38 codes from your data successfully matched countries in the map
## 3 codes from your data failed to match with a country code in the map
##      failedCodes failedCountries                   
## [1,] NA          &quot;DR Congo&quot;                        
## [2,] NA          &quot;Libyan Arab Jamahiriya&quot;          
## [3,] NA          &quot;Occupied Palestinian Territories&quot;
## 205 codes from the map weren&#39;t represented in your data</code></pre>
<pre class="r"><code>par(mai =c (0,0,0.2,0), xaxs = &quot;i&quot;, yaxs = &quot;i&quot;)
glob_map = mapCountryData(joined_map, nameColumnToPlot = &quot;tot_victims&quot;, addLegend = FALSE)</code></pre>
<pre><code>## You asked for 7 quantiles, only 3 could be created in quantiles classification</code></pre>
<p><img src="map_development_files/figure-gfm/unnamed-chunk-1-1.png" width="90%" /></p>
<p>It worked!!!! I think? Can filter by year (manually in the code). Concerned that the documentation specifies that the df that should be merged to the map should only have one country per line. Also, we’re missing important countries that didn’t exist on the underlying map (Palestine, Libya, DR Congo). I think we need to find out how they’re stored in the underlying map so that we can recode the country names in our df before merging.</p>
<pre class="r"><code>joined_map$country %&gt;% 
  view()

view(countrySynonyms)

global_map_df$country =
  recode(global_map_df$country,
         &#39;Chechnya&#39; = &#39;Russia&#39;,
         &#39;DR Congo&#39; = &#39;Democratic Republic of the Congo&#39;,
         &#39;Syria&#39; = &#39;Syrian Arab Republic&#39;,
         &#39;Libyan Arab Jamahiriya&#39; = &#39;Libya&#39;,
         &#39;Occupied Palestinian Territories&#39; = &#39;Occupied Palestinian Territory&#39;)

global_map_df =
  global_map_df %&gt;% 
  filter(country != &quot;Kashmir&quot;)</code></pre>
<p>First I tried to view the list of countries once merged. It appears to only show the countries from our DF.</p>
<p>Then I found that the <code>rworldmap</code> package has a df with a list of synonyms for the countries it includes. I pulled up the df and searched for the five countries that did not match, to see how they are referred to by the <code>rworldmap</code> package.</p>
<p>Now I’m going to go back and try merging with the new df with tidied / matched names. I ran the code and found 0 failed codes. Yay! We’ve matched. Next steps involve confirming that we can match multiple rows of data with the same country.</p>
<pre class="r"><code>map_world = map_data(&quot;world&quot;)

map_world$region =
  recode(map_world$region,
         &#39;Ivory Coast&#39; = &#39;Cote D\&#39;Ivoire&#39;,
         &#39;Syria&#39; = &#39;Syrian Arab Republic&#39;
         )

global_map_df$country =
  recode(global_map_df$country,
         &#39;Occupied Palestinian Territories&#39; = &#39;Palestine&#39;,
         &#39;DR Congo&#39; = &#39;Democratic Republic of the Congo&#39;,
         &#39;Congo&#39; = &#39;Republic of Congo&#39;,
         &#39;Libyan Arab Jamahiriya&#39; = &#39;Libya&#39;,
         &#39;Chechnya&#39; = &#39;Russia&#39;
         )

global_map_df =
  global_map_df %&gt;% 
  filter(country != &quot;Kashmir&quot;)

map_world =
  map_world %&gt;% 
  rename(country = region)

global_map_df_2019 =
  global_map_df %&gt;% 
  filter(year == &quot;2019&quot;)

joined_map_2019 =
  left_join(map_world, global_map_df_2019) %&gt;% 
  mutate(polygon_fill = ifelse(is.na(tot_victims), F, T))</code></pre>
<pre><code>## Joining, by = &quot;country&quot;</code></pre>
<pre class="r"><code>ggplot() +
  geom_polygon(data = joined_map_2019, aes(x = long, y = lat, group = group, fill = polygon_fill))</code></pre>
<p><img src="map_development_files/figure-gfm/back%20to%20gg_plot-1.png" width="90%" /></p>
<p>After working through all this…if we want the map to be interactive (labels showing our data, etc.) I think we need to stick with <code>leaflet</code>. We can utilize a polygon layer in <code>leaflet</code>…I downloaded a geojson file, map of the world, from <a href="https://geojson-maps.ash.ms/" class="uri">https://geojson-maps.ash.ms/</a></p>
<pre class="r"><code>countries = geojsonio::geojson_read(&quot;./data/custom.geo.json&quot;, what = &quot;sp&quot;)

main_map = leaflet(countries) %&gt;% 
  addTiles() %&gt;% 
  addPolygons()

main_map</code></pre>
<p><img src="map_development_files/figure-gfm/back_to_leaflet-1.png" width="90%" /></p>
<p>The above imposes polygons on the map. This is good. I think we can play around with the size of the outlines, as well as the fill.</p>
<p>What will take a decent amount of work is mapping our data onto this map. (1) Need to compare names again to figure out how to merge? What names to update so we have a common variable to join on. (2) Think we may also have a problem with having countries being listed multiple times in our df (our observations are aggregated attacks within a country per year, not only per country). Make a function that plots individual data frames per year?</p>
<pre class="r"><code>names(countries)</code></pre>
<pre><code>##  [1] &quot;scalerank&quot;  &quot;featurecla&quot; &quot;labelrank&quot;  &quot;sovereignt&quot; &quot;sov_a3&quot;    
##  [6] &quot;adm0_dif&quot;   &quot;level&quot;      &quot;type&quot;       &quot;admin&quot;      &quot;adm0_a3&quot;   
## [11] &quot;geou_dif&quot;   &quot;geounit&quot;    &quot;gu_a3&quot;      &quot;su_dif&quot;     &quot;subunit&quot;   
## [16] &quot;su_a3&quot;      &quot;brk_diff&quot;   &quot;name&quot;       &quot;name_long&quot;  &quot;brk_a3&quot;    
## [21] &quot;brk_name&quot;   &quot;brk_group&quot;  &quot;abbrev&quot;     &quot;postal&quot;     &quot;formal_en&quot; 
## [26] &quot;formal_fr&quot;  &quot;note_adm0&quot;  &quot;note_brk&quot;   &quot;name_sort&quot;  &quot;name_alt&quot;  
## [31] &quot;mapcolor7&quot;  &quot;mapcolor8&quot;  &quot;mapcolor9&quot;  &quot;mapcolor13&quot; &quot;pop_est&quot;   
## [36] &quot;gdp_md_est&quot; &quot;pop_year&quot;   &quot;lastcensus&quot; &quot;gdp_year&quot;   &quot;economy&quot;   
## [41] &quot;income_grp&quot; &quot;wikipedia&quot;  &quot;fips_10&quot;    &quot;iso_a2&quot;     &quot;iso_a3&quot;    
## [46] &quot;iso_n3&quot;     &quot;un_a3&quot;      &quot;wb_a2&quot;      &quot;wb_a3&quot;      &quot;woe_id&quot;    
## [51] &quot;adm0_a3_is&quot; &quot;adm0_a3_us&quot; &quot;adm0_a3_un&quot; &quot;adm0_a3_wb&quot; &quot;continent&quot; 
## [56] &quot;region_un&quot;  &quot;subregion&quot;  &quot;region_wb&quot;  &quot;name_len&quot;   &quot;long_len&quot;  
## [61] &quot;abbrev_len&quot; &quot;tiny&quot;       &quot;homepart&quot;   &quot;filename&quot;</code></pre>
<pre class="r"><code>view(countries$name)

x =
  global_map_df$country %&gt;% 
  unique()

y =
  countries$name %&gt;% 
  unique()

x %in% y</code></pre>
<pre><code>##  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [13]  TRUE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE
## [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE
## [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE
## [61]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE
## [73]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE</code></pre>
<pre class="r"><code>discrepancy = x[which(!(x %in% y))]

discrepancy</code></pre>
<pre><code>## [1] &quot;Central African Republic&quot;         &quot;Republic of Congo&quot;               
## [3] &quot;Cote D&#39;Ivoire&quot;                    &quot;Democratic Republic of the Congo&quot;
## [5] &quot;Mauritius&quot;                        &quot;Occupied Palestinian Territory&quot;  
## [7] &quot;South Sudan&quot;                      &quot;Syrian Arab Republic&quot;            
## [9] &quot;Western Sahara&quot;</code></pre>
<pre class="r"><code>global_map_df$country =
  recode(global_map_df$country,
         &#39;Central African Republic&#39; = &#39;Central African Rep.&#39;,
         &#39;Republic of Congo&#39; = &#39;Congo&#39;,
         &#39;Cote D\&#39;Ivoire&#39; = &#39;Côte d\&#39;Ivoire&#39;,
         &#39;Democratic Republic of the Congo&#39; = &#39;Dem. Rep. Congo&#39;,
         &#39;Occupied Palestinian Territory&#39; = &#39;Palestine&#39;,
         &#39;South Sudan&#39; = &#39;S. Sudan&#39;,
         &#39;Syrian Arab Republic&#39; = &#39;Syria&#39;,
         &#39;Western Sahara&#39; = &#39;W. Sahara&#39;
         )

global_map_df =
  global_map_df %&gt;% 
  filter(country != &quot;Mauritius&quot;)

global_map_df =
  global_map_df %&gt;% 
  rename(name = country)</code></pre>
<p>Mauritius was dropped. Only 1 attack. Will need to make note of in our final dashboard.</p>
<p>Next steps: * figure out how to match our df with polygons * aesthetics of polygons - fix (lines too wide) * write function to match df (for each YEAR) with polygons - this is what will be called in the shiny app * popups for hovering over each country * move back to the map dashboard document to work in shiny!</p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
